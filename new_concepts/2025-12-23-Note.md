오늘 두 동기생의 대화를 몰래 염탐하다가 너무나도 수준이 높은 대화여서 염탐한 보람이 하나도 없었다. 마치 나루토와 사스케의 대전을 구경하는 록리의 기분을 느꼈다. 

하지만 모른다고 그냥 와 대단하다 하고 넘어가면 안되기에 오늘 몰래 들어본 개념을 정리해본다. 

일단 필자는 초등학교를 2학년 떄 자퇴한 화려한 학력이기에 맞춤법 오류와 부족한 필력은 양해를 부탁한다. 

---
### 대화의 내용은 이러했다. 

## 동기 A: 
B님의 저번 프로젝트 팀원이 프로젝트 구조를 가져와서 보여줬는데 이해가 되지 않는 점이 몇 가지 있습니다. 혹시 설명 가능할까요?
- 왜 스토리지가 밖으로 혼자 따로 나와있나요?
- 어째서 Domain이 존재하는데 Service 클래스에서 API의 DTO를 직접 접근하나요? 
  - 보통은 응답요청 dto를 사용하는데 왜 이런 방식을 사용하셨나요?
  - 해당 방식으로 하면 레이어 분리가 무너지지 않나요?
- 혹시 버전 관리도 염두하시고 v1등을 이름에 사용하셨나요?

## 동기 B: 
사실 처음에는 제가 생각했던 흐름은 해당과 같았습니다.

Controller <--- dto ---> Service <---- domain ----> Repository <----- Entity ----> db

전 원래 pojo를 활용하여 entity와 domain에서 사용하는 것을 분리하는 형태를 생각해서 서비스 내부에 dto가 있었습니다.

하지만 저희 프로젝트의 규모가 작다보니, 이러한 식의 분리는 오히려 복잡함만 늘리고 실용성이 떨어지기에, 현재 보고 계신 형태로 축약했습니다. 

## 동기 A: 
아 그렇군요. 완벽히 이해 했습니다. 왜 실무처럼 진행한 흔적이 보이다가 갑자기 규모가 작아졌는지 이해했습니다. 답변 감사합니다. 

## 나: 
???

---

나의 의문은 이러했다. 
1. Service에서 원래 DTO를 받는게 맞지 않나? 
2. Domain은 그냥 각각의 기능들을 의미하는 거 아닌가? 근데 그게 왜 dto를 직접 접근하는것에 대한 문제가 되지?
3. pojo가 뭔데?
4. 만약 처음 생각한 구조가 실무에서 사용되는 구조라면 규모가 작아졌다고 왜 구조를 변경했는가?

처음에는 뭐가 뭔지를 몰라서 30분 정도 난 뭘 모르는가 고민했다. 그리고 해당 질문들로 모르는 점들을 정리했다. 

이후 LLM들과 열심히 키보드 배틀을 하면서 해당 답변을 얻었다. 순서대로 질문을 답해보자. 
## 1. Service에서 원래 DTO를 받는게 맞지 않나?

사실 난 처음에는 비즈니스 로직은 Service 클래스가 담당하는 걸로 알았다. 그렇기에 당연히 직접 DTO를 받고, 해당 DTO를 통해서 DB에서 entity를 꺼내오는 걸로 생각을 했다. 

하지만 실제로 service는 비즈니스 로직의 실행을 담당한다. 그럼 실제 로직은 어디 있는가? 이에 대한 답변은 다음 질문으로 이어진다. 


## 2. Domain은 그냥 각각의 기능들을 의미하는 거 아닌가? 근데 그게 왜 dto를 직접 접근하는것에 대한 문제가 되지?

Domain 이란 무엇인가?
Domain은 영어로는 영역이란 의미가 있다. 한동한 인터넷을 강타한 영연전개가 영어로는 domain expansion이다.
하지만 안타깝게도 개발자에게 영연전개는 불가능하기에, 개발자가 사용하는 domain은 다른 의미가 있다. 

1. 한 프로그램에서 다양한 기능들을 각각 domain이라고 칭하기도 한다.
2. 또한 domain은 웹앱에서 비즈니스 로직을 담당하는 클래스를 의미하기도 한다. 

 사실 처음 이 대화를 본 난 머리속에 우주가 펼쳐졌다. 개발자는 영연전개를 사용할 수 없다고 했는데 그 순간 무량공처를 맞은 거 마냥 사고가 마비되는 기분이었다. 

각설하고 이렇게 domain은 실제로 비즈니스 로직을 담당하느 클래스이기에, service는 그저 값을 받고 domain에 보내줄 뿐 직접 요청하고 접근할 필요는 없다.

근데 왜 굳이 domain과 service의 역할을 분리하는가? 이 문제는 개발자의 숙적인 코드 반복으로 인한 유지 보수의 어려움, 그리고 가독성의 문제 때문이다. 
